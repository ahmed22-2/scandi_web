{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: \"AddProduct\",\n  data: function data() {\n    return {\n      name: '',\n      sku: '',\n      price: '',\n      type: '0',\n      errors: [],\n      attributes: [],\n      type_value: 'Type',\n      types: [],\n      err: [],\n      host: \"https://scandi-task-api.000webhostapp.com/\"\n    };\n  },\n  methods: {\n    back: function back() {\n      this.$router.push(\"/\");\n    },\n    addProduct: function addProduct() {\n      var _this = this;\n\n      var data = new FormData();\n      data.append(\"sku\", this.sku);\n      data.append(\"name\", this.name);\n      data.append(\"price\", this.price);\n      data.append(\"type\", this.type_value);\n      data.append(\"attributes\", JSON.stringify(this.attributes));\n\n      for (var key in this.attributes) {\n        data.append(this.attributes[key].name, this.attributes[key].value);\n      }\n\n      axios.post(this.host + 'back_end/public/home/addProduct', data).then(function (res) {\n        if (res.data.errors) {\n          _this.errors = res.data.errors;\n        } else {\n          _this.back();\n        }\n      }).catch(function (err) {\n        return _this.err = err.data;\n      });\n    },\n    getAttributes: function getAttributes(event) {\n      var _this2 = this;\n\n      var type_id = event.target.value;\n      this.type_value = event.target.options[event.target.options.selectedIndex].text;\n      axios.get(this.host + 'back_end/public/home/getAttributes&type_id=' + type_id).then(function (res) {\n        _this2.attributes = res.data;\n      }).catch(function (err) {\n        console.log(\"Error\", err);\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // this.getTypes();          \n    axios.get(this.host + 'back_end/public/home/getTypes').then(function (res) {\n      _this3.types = res.data;\n    }).catch(function (err) {\n      console.log(\"Error\", err);\n    });\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AAEA;EACAA,kBADA;EAEAC,IAFA,kBAEA;IACA;MACAD,QADA;MAEAE,OAFA;MAGAC,SAHA;MAIAC,SAJA;MAKAC,UALA;MAMAC,cANA;MAOAC,kBAPA;MAQAC,SARA;MASAC,OATA;MAUAC;IAVA;EAaA,CAhBA;EAiBAC;IACAC,IADA,kBACA;MACA;IACA,CAHA;IAIAC,UAJA,wBAIA;MAAA;;MACA;MACAZ;MACAA;MACAA;MACAA;MACAA;;MACA;QACAA;MACA;;MACAa,MACAC,IADA,CACA,6CADA,EACAd,IADA,EAEAe,IAFA,CAEA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CARA,EASAC,KATA,CASA;QAAA;MAAA,CATA;IAaA,CA3BA;IA4BAC,aA5BA,yBA4BAC,KA5BA,EA4BA;MAAA;;MACA;MACA;MACAL,MACAM,GADA,CACA,mEADA,EAEAJ,IAFA,CAEA;QACA;MACA,CAJA,EAKAC,KALA,CAKA;QAAAI;MAAA,CALA;IAOA;EAtCA,CAjBA;EA0DAC,OA1DA,qBA2DA;IAAA;;IACA;IACAR,MACAM,GADA,CACA,2CADA,EAEAJ,IAFA,CAEA;MACA;IACA,CAJA,EAKAC,KALA,CAKA;MAAAI;IAAA,CALA;EAUA;AAvEA","names":["name","data","sku","price","type","errors","attributes","type_value","types","err","host","methods","back","addProduct","axios","post","then","catch","getAttributes","event","get","console","mounted"],"sourceRoot":"src/views","sources":["AddProduct.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <header>\n            <div>\n                <h2>Product Add</h2>\n            </div>\n             <div class=\"btns-header\">                \n                <button class=\"btn\" @click=\"addProduct()\" type=\"Submit\">Save</button>\n\n                <button class=\"btn\" @click=\"back()\">Cancel</button>\n            </div>\n        </header>\n        <hr>\n        <div class=\"errors\">\n            <span v-for=\"error in errors\" :key=\"error.id\">\n                \n            <br></span>\n        </div>\n        <div class=\"form\" >\n            <form action=\"\" id=\"product_form\" @submit.prevent=\"addProduct()\">\n                <div>\n                    <div class=\"inp_form\">\n                        <label for=\"sku\">SKU</label>\n                        <input type=\"text\" id=\"sku\"  placeholder=\"#sku\" v-model=\"sku\" >\n                    </div>\n                    <div class=\"inp_form\">\n                        <label for=\"name\">Name</label>\n                        <input type=\"text\" id=\"name\" placeholder=\"#name\" v-model=\"name\" >\n                    </div>\n                    <div class=\"inp_form\">\n                        <label for=\"price\">Price ($)</label>\n                        <input type=\"text\" id=\"price\" placeholder=\"#price\" v-model=\"price\" >\n                    </div>\n                </div>\n\n\n                <div>\n                    <select v-model=\"type\" name=\"type\" id=\"productType\" @change=\"getAttributes($event)\" >\n                            <option disabled value=\"0\" selected>type</option>\n                            <option :key=\"item.id\" v-for=\"item in types\" :value=\"item.id\" :id=\"item.name\" >{{item.name}}</option>\n                    </select>\n                </div>\n\n                <div  class=\"inp_form\" v-for=\"attribute in attributes\" :key=\"attribute.id\" :id=\"attribute.id\">\n                    <label :for=\"attribute.name\" >{{attribute.name}} ({{attribute.unit}}) </label> \n                    <input :id=\"attribute.name\"  class=\"input-field\" name=\"field1\" type=\"text\"   v-model=\"attribute.value\">\n                </div>\n                <p>{{type.description}}</p>\n\n            </form>\n        </div>\n    </div>\n</template>\n\n\n\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: \"AddProduct\",\n  data(){\n      return {\n          name:'',\n          sku:'',\n          price: '',\n          type: '0',\n          errors: [],\n          attributes: [],\n          type_value: 'Type',\n          types: [],\n          err: [],\n          host: \"https://scandi-task-api.000webhostapp.com/\"\n          }\n          \n      },\n  methods: { \n          back(){\n                  this.$router.push(\"/\");\n              },\n          addProduct(){\n                  var data = new FormData();\n                  data.append(\"sku\", this.sku);\n                  data.append(\"name\", this.name);\n                  data.append(\"price\", this.price);\n                  data.append(\"type\", this.type_value);\n                  data.append(\"attributes\", JSON.stringify(this.attributes));\n                  for (const key in this.attributes) {\n                          data.append(this.attributes[key].name,this.attributes[key].value);\n                      }\n                  axios\n                  .post(this.host+'back_end/public/home/addProduct',data)\n                  .then(res => { \n                      if(res.data.errors){\n                          this.errors = res.data.errors;\n                      }else{\n                          this.back();\n                      }\n                  })\n                  .catch(err => (this.err = err.data))\n              \n\n\n          }\n          ,getAttributes(event){\n              let type_id = event.target.value;\n              this.type_value = event.target.options[event.target.options.selectedIndex].text;\n              axios\n              .get(this.host+'back_end/public/home/getAttributes&type_id='+type_id)\n              .then(res =>{\n                  (this.attributes = res.data)\n                  })\n              .catch(err => {console.log(\"Error\", err);});\n                  \n          }\n        \n\n  },mounted()\n  {\n      // this.getTypes();          \n              axios\n              .get(this.host+'back_end/public/home/getTypes')\n              .then(res => {\n                  this.types = res.data;\n              })\n              .catch(err => {console.log(\"Error\", err);});\n\n        \n      \n\n  }\n}\n\n</script>\n\n\n<style scoped>\n.container {\n    position: relative;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n\nheader{\n  margin-top: 50px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n.btns-header {\n  margin-right: 50px;\n    width: 20%;\n    display: flex;\n    justify-content: space-around;\n}\nheader h2 {\n    margin-left: 20px; \n}\n.btn {\n  color: #fff;\n  border: none;\n  background-color: #2298e6;\n  padding: 5px;\n  cursor: pointer;\n}\n.btn a {\n    text-decoration: none;\n    color: #fff;\n}\n\nform {\n  width: 200px;\n  margin: 50px 20px;\n}\nform div {\n    margin: 20px 0;\n}\nform input,select {\n    margin-bottom: 5px;\n    padding: 4px;\n    border: 1px solid #2298e6;\n    outline: #2298e6;\n}\n::placeholder{\n  color: rgb(88, 81, 81);\n}\nform input {\n  margin-left: 20px;\n  position: absolute;\n  left: 20%;\n}\n\n.errors {\n    position:absolute;\n    margin: 25px 500px;\n    color: red;\n} \n.inp_form {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n}\n\n\n\n\n</style>"]},"metadata":{},"sourceType":"module"}